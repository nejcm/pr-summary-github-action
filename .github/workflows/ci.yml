name: ci

on:
  pull_request:
    branches:
      - develop
  workflow_dispatch:

jobs:
  build:
    name: Running ci
    if: "github.event.pull_request.draft != true"
    runs-on: ubuntu-latest
    env:
      CI: true

    steps:
      - name: ğŸ›’ Checkout code
        uses: actions/checkout@v4

      - name: ğŸ“„ PR summary
        id: summary
        uses: ./
        with:
          #openAiKey: ${{ secrets.OPENAI_KEY }}
          anthropicKey: ${{ secrets.ANTHROPIC_KEY }}
          notionKey: ${{ secrets.NOTION_KEY }}
          linearKey: ${{ secrets.LINEAR_KEY }}
          linearViewId: "72c7011b3e8b"
          comment: "true"
          prompt: "Provide a set of Release Notes in Markdown format based on the following list of tasks that have been exported from Linear. These notes are for customers, so exclude anything technical or reference to internal or backend fixes / features. Make reference to high level features rather than specifics. Keep your notes fairly high level. Also exclude any ticket IDS."

      - name: ğŸ–¨ï¸ Print summar
        run: echo ${{ steps.summary.outputs.summary }}
